var D=Object.defineProperty,V=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var I=(t,e,s)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,x=(t,e)=>{for(var s in e||(e={}))S.call(e,s)&&I(t,s,e[s]);if(E)for(var s of E(e))N.call(e,s)&&I(t,s,e[s]);return t},O=(t,e)=>V(t,R(e));import{c as C,o as i,a as u,u as L,F as f,b as c,t as v,d as p,n as w,e as M,l as U,r as y,f as B,w as j,v as q,g as K,h as F,i as $,j as z}from"./vendor.303251e7.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};H();const W="modulepreload",b={},G="./",l=function(e,s){return!s||s.length===0?e():Promise.all(s.map(a=>{if(a=`${G}${a}`,a in b)return;b[a]=!0;const o=a.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":W,o||(r.as="script",r.crossOrigin=""),r.href=a,document.head.appendChild(r),o)return new Promise((g,h)=>{r.addEventListener("load",g),r.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())};var P=(t,e)=>{const s=t.__vccOpts||t;for(const[a,o]of e)s[a]=o;return s};const J={class:"msg-box"},Q={key:0,class:"nickname"},X={class:"msg"},Y=["src"],Z=["src"],ee={class:"msg-box"},te={key:0,class:"nickname"},se={class:"msg"},oe={name:"TextMsgItem"},ne=Object.assign(oe,{props:{info:{type:Object,default:()=>({type:"text",socketId:"",value:"",avatarUrl:""})},socketId:{type:String,default:""},showName:{type:Boolean,default:!0}},setup(t){const e=t,s=C(()=>e.info.socketId===e.socketId);return(a,o)=>(i(),u("div",{class:w(["text-msg-item",[L(s)?"self":"others",t.showName?"has-name":""]])},[L(s)?(i(),u(f,{key:0},[c("div",J,[t.showName?(i(),u("div",Q,v(t.info.socketId),1)):p("",!0),c("div",X,v(t.info.value),1)]),c("img",{class:"avatar",src:t.info.avatarUrl,alt:""},null,8,Y)],64)):(i(),u(f,{key:1},[c("img",{class:"avatar",src:t.info.avatarUrl,alt:""},null,8,Z),c("div",ee,[t.showName?(i(),u("div",te,v(t.info.socketId),1)):p("",!0),c("div",se,v(t.info.value),1)])],64))],2))}});var ae=P(ne,[["__scopeId","data-v-7b630fa0"]]);const re={class:"notice-item"},ce={class:"inner"},ie={name:"notice-item"},le=M(O(x({},ie),{props:{info:{type:Object,default:()=>({type:"notice",value:""})}},setup(t){return(e,s)=>(i(),u("div",re,[c("div",ce,v(t.info.value),1)]))}}));var ue=P(le,[["__scopeId","data-v-23cef689"]]);function de(t){switch(t){case"./assets/avatars/1.png":return l(()=>import("./1.136ed941.js"),[]);case"./assets/avatars/10.png":return l(()=>import("./10.89228f44.js"),[]);case"./assets/avatars/2.png":return l(()=>import("./2.765a035c.js"),[]);case"./assets/avatars/3.png":return l(()=>import("./3.c5d44e23.js"),[]);case"./assets/avatars/4.png":return l(()=>import("./4.85e095fd.js"),[]);case"./assets/avatars/5.png":return l(()=>import("./5.bfe29c4c.js"),[]);case"./assets/avatars/6.png":return l(()=>import("./6.9e0c5d01.js"),[]);case"./assets/avatars/7.png":return l(()=>import("./7.2072e974.js"),[]);case"./assets/avatars/8.png":return l(()=>import("./8.82d19262.js"),[]);case"./assets/avatars/9.png":return l(()=>import("./9.0a5c6c13.js"),[]);default:return new Promise(function(e,s){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const _e={class:"container"},ve={class:"msgs",id:"msgs"},me={class:"opts-bar"},fe=["onKeyup"],pe={setup(t){const e=U("http://47.102.149.181:3004"),s=()=>{const d=Math.floor(Math.random()*10)+1;return de(`./assets/avatars/${d}.png`).then(m=>m.default)};let a="";const o=y([]),n=y(""),r=y("1"),g=()=>{e.on("connect",()=>{r.value=e.id,console.log(`socket\u8FDE\u63A5\u6210\u529F,socketId\u4E3A${r.value}`)}),e.on("disconnect",()=>{console.log(`socket\u65AD\u5F00\u8FDE\u63A5,socketId\u4E3A${r.value}`)}),h()},h=()=>{e.on("message",d=>{o.value.push(d),F(()=>{T()})})},T=()=>{const d=document.getElementById("msgs");window.scrollTo(0,d.scrollHeight)},k=async()=>{n.value!==""&&(a||(a=await s()),e.emit("message",{type:"text",value:n.value,socketId:r.value,avatarUrl:a}),n.value="")};return g(),(d,m)=>(i(),u("div",_e,[c("div",ve,[(i(!0),u(f,null,B(o.value,(_,A)=>(i(),u(f,{key:A},[_.type==="text"?(i(),$(ae,{key:0,info:_,"socket-id":r.value},null,8,["info","socket-id"])):p("",!0),_.type==="notice"?(i(),$(ue,{key:1,info:_},null,8,["info"])):p("",!0)],64))),128))]),c("div",me,[j(c("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>n.value=_),type:"text",onKeyup:K(k,["enter"])},null,40,fe),[[q,n.value]]),c("button",{class:w({disabled:n.value===""}),onClick:k},"\u53D1\u9001",2)])]))}};z(pe).mount("#app");
