var L=Object.defineProperty,M=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var h=(t,e,s)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,k=(t,e)=>{for(var s in e||(e={}))T.call(e,s)&&h(t,s,e[s]);if(g)for(var s of g(e))j.call(e,s)&&h(t,s,e[s]);return t},x=(t,e)=>M(t,U(e));import{c as A,o as c,a as i,u as I,F as f,b as a,t as u,d as v,n as $,e as C,l as K,r as m,f as E,w as F,v as V,g as D,h as P,i as b,j as q}from"./vendor.303251e7.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};z();var w=(t,e)=>{const s=t.__vccOpts||t;for(const[r,o]of e)s[r]=o;return s};const H={class:"msg-box"},G={key:0,class:"nickname"},J={class:"msg"},Q=["src"],R=["src"],W={class:"msg-box"},X={key:0,class:"nickname"},Y={class:"msg"},Z={name:"TextMsgItem"},ee=Object.assign(Z,{props:{info:{type:Object,default:()=>({type:"text",socketId:"",value:"",avatarUrl:""})},socketId:{type:String,default:""},showName:{type:Boolean,default:!0}},setup(t){const e=t,s=A(()=>e.info.socketId===e.socketId);return(r,o)=>(c(),i("div",{class:$(["text-msg-item",[I(s)?"self":"others",t.showName?"has-name":""]])},[I(s)?(c(),i(f,{key:0},[a("div",H,[t.showName?(c(),i("div",G,u(t.info.socketId),1)):v("",!0),a("div",J,u(t.info.value),1)]),a("img",{class:"avatar",src:t.info.avatarUrl,alt:""},null,8,Q)],64)):(c(),i(f,{key:1},[a("img",{class:"avatar",src:t.info.avatarUrl,alt:""},null,8,R),a("div",W,[t.showName?(c(),i("div",X,u(t.info.socketId),1)):v("",!0),a("div",Y,u(t.info.value),1)])],64))],2))}});var te=w(ee,[["__scopeId","data-v-7b630fa0"]]);const se={class:"notice-item"},oe={class:"inner"},ne={name:"notice-item"},ae=C(x(k({},ne),{props:{info:{type:Object,default:()=>({type:"notice",value:""})}},setup(t){return(e,s)=>(c(),i("div",se,[a("div",oe,u(t.info.value),1)]))}}));var ce=w(ae,[["__scopeId","data-v-23cef689"]]);const le={class:"container"},ie={class:"msgs",id:"msgs"},re={class:"opts-bar"},de=["onKeyup"],ue={setup(t){const e=K("http://47.102.149.181:3004");let s="";const r=()=>`/assets/avatars/${Math.floor(Math.random()*10)+1}.png`,o=m([]),n=m(""),l=m("1"),N=()=>{e.on("connect",()=>{l.value=e.id,console.log(`socket\u8FDE\u63A5\u6210\u529F,socketId\u4E3A${l.value}`)}),e.on("disconnect",()=>{console.log(`socket\u65AD\u5F00\u8FDE\u63A5,socketId\u4E3A${l.value}`)}),O()},O=()=>{e.on("message",_=>{o.value.push(_),P(()=>{S()})})},S=()=>{const _=document.getElementById("msgs");window.scrollTo(0,_.scrollHeight)},p=async()=>{n.value!==""&&(s||(s=r()),e.emit("message",{type:"text",value:n.value,socketId:l.value,avatarUrl:s}),n.value="")};return N(),(_,y)=>(c(),i("div",le,[a("div",ie,[(c(!0),i(f,null,E(o.value,(d,B)=>(c(),i(f,{key:B},[d.type==="text"?(c(),b(te,{key:0,info:d,"socket-id":l.value},null,8,["info","socket-id"])):v("",!0),d.type==="notice"?(c(),b(ce,{key:1,info:d},null,8,["info"])):v("",!0)],64))),128))]),a("div",re,[F(a("input",{"onUpdate:modelValue":y[0]||(y[0]=d=>n.value=d),type:"text",onKeyup:D(p,["enter"])},null,40,de),[[V,n.value]]),a("button",{class:$({disabled:n.value===""}),onClick:p},"\u53D1\u9001",2)])]))}};q(ue).mount("#app");
